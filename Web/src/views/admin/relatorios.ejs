<%- include('../layouts/top', {
  active,
  title: 'HOME CARE — Relatórios',
  pageCss: ['/public/css/admin_css/pages/relatorios.css'],
  pageJs:  ['/public/js/reports.js']
}) %>

<div class="reports">
  <aside class="reports__aside">
    <h3>Relatórios</h3>
    <div class="report-grid">
      <button class="report-item" data-panel="users">Relatório de Usuários &rsaquo;</button>
      <button class="report-item" data-panel="appointments">Relatório de Agendamentos &rsaquo;</button>
      <button class="report-item" data-panel="care">Relatório de Atendimentos &rsaquo;</button>
    </div>

    <div class="patient-search">
      <h4>Paciente</h4>
      <input class="input" id="patientQuery" placeholder="Buscar por nome/e-mail" />
      <ul class="list patients" id="patientList"></ul>
    </div>
  </aside>

  <section class="reports__content">
    <div class="card">
      <h3 id="patientTitle">Selecione um paciente</h3>

      <div id="patientDetails" class="hidden">
        <div class="tabs">
          <button class="tab active" data-tab="evaluations">Avaliações</button>
          <button class="tab" data-tab="files">Exames / Prontuários</button>
        </div>

        <div class="tab-pane is-visible" id="tab-evaluations">
          <div id="evalList" class="list"></div>

          <div class="add-eval">
            <h4>Adicionar avaliação do atendimento</h4>
            <div class="row">
              <select class="input" id="evalScore">
                <option value="5">5 - Excelente</option>
                <option value="4">4 - Bom</option>
                <option value="3">3 - Regular</option>
                <option value="2">2 - Ruim</option>
                <option value="1">1 - Péssimo</option>
              </select>
              <input class="input" id="evalNotes" placeholder="Observações (opcional)" />
              <button class="btn btn-primary" id="evalSave">Salvar</button>
            </div>
          </div>
        </div>

        <div class="tab-pane" id="tab-files">
          <div class="uploader">
            <input type="file" id="fileInput" />
            <button class="btn btn-primary" id="btnUpload">Carregar arquivo</button>
          </div>
          <ul class="list" id="fileList"></ul>
        </div>
      </div>

      <div id="panelOutput" class="mt"></div>
    </div>
  </section>
</div>

<script>
  window.__USERS__ = <%- JSON.stringify(users || []) %>;
</script>

<%- include('../layouts/bottom') %>
